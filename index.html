<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mailtrap Inbox</title>
  <link rel="icon" type="image/png" href="assets/mailtrap-icon.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-left">
        <h1 class="logo">Mailtrap Inbox</h1>
        <button type="button" id="settings-btn" class="btn btn-secondary btn-icon" title="Settings">⚙ Settings</button>
      </div>
      <div class="header-actions">
        <div class="token-field inbox-field">
          <label for="inbox-select">Inbox</label>
          <span class="inbox-dropdown-group">
            <select id="inbox-select" class="inbox-select">
              <option value="">Load inboxes…</option>
            </select>
            <span class="default-inbox-wrap">
              <input type="checkbox" id="default-inbox" class="default-inbox-cb" />
              <label for="default-inbox" class="default-inbox-label">Default Inbox</label>
            </span>
          </span>
        </div>
        <button type="button" id="refresh" class="btn btn-primary">Refresh</button>
      </div>
    </header>

    <div id="token-prompt" class="token-prompt hidden">
      <div class="token-prompt-box">
        <p>To load messages, configure your API token and Account ID in Settings.</p>
        <button type="button" id="open-settings-from-prompt" class="btn btn-primary">Open Settings</button>
      </div>
    </div>

    <div id="settings-modal" class="modal hidden">
      <div class="modal-box settings-box">
        <h2 class="modal-title">Settings</h2>
        <p class="modal-desc">Your API token and Account ID are stored locally and never sent to any server except Mailtrap.</p>
        <div class="settings-form">
          <div class="settings-field">
            <label for="settings-api-token">API Token</label>
            <input type="password" id="settings-api-token" placeholder="Paste your Mailtrap Api-Token" autocomplete="off" />
          </div>
          <div class="settings-field">
            <label for="settings-account-id">Account ID</label>
            <input type="text" id="settings-account-id" placeholder="e.g. 123456" autocomplete="off" />
          </div>
          <div class="modal-actions">
            <button type="button" id="settings-cancel" class="btn btn-secondary">Cancel</button>
            <button type="button" id="settings-save" class="btn btn-primary">Save</button>
          </div>
        </div>
      </div>
    </div>

    <main class="main">
      <aside class="message-list-panel">
        <div class="list-header">
          <input type="search" id="search-input" class="search-input" placeholder="Search inbox (subject, to)…" autocomplete="off" />
          <span class="count" id="message-count"></span>
        </div>
        <ul id="message-list" class="message-list" role="list"></ul>
        <div id="pagination" class="pagination hidden">
          <button type="button" id="page-first" class="btn btn-secondary btn-page" title="First page">&lt;&lt;</button>
          <button type="button" id="page-prev" class="btn btn-secondary btn-page">Previous</button>
          <span id="page-info" class="page-info">Page 1</span>
          <button type="button" id="page-next" class="btn btn-secondary btn-page">Next</button>
        </div>
        <div id="list-loading" class="loading hidden">Loading…</div>
        <div id="list-error" class="error hidden"></div>
      </aside>
      <section class="detail-panel">
        <div id="detail-empty" class="detail-empty">
          <p>Select a message</p>
        </div>
        <div id="detail-content" class="detail-content hidden">
          <header class="detail-header">
            <h2 id="detail-subject" class="detail-subject"></h2>
            <div class="detail-meta">
              <div class="meta-row">
                <span class="meta-label">From</span>
                <span id="detail-from" class="meta-value"></span>
              </div>
              <div class="meta-row">
                <span class="meta-label">To</span>
                <span id="detail-to" class="meta-value"></span>
              </div>
              <div class="meta-row">
                <span class="meta-label">Sent</span>
                <span id="detail-sent" class="meta-value"></span>
              </div>
              <div class="meta-row">
                <span class="meta-label">Size</span>
                <span id="detail-size" class="meta-value"></span>
              </div>
            </div>
          </header>
          <div class="detail-tabs">
            <button type="button" class="tab active" data-tab="html">HTML</button>
            <button type="button" class="tab" data-tab="text">Text</button>
            <button type="button" class="tab" data-tab="raw">Raw</button>
          </div>
          <div id="detail-body" class="detail-body">
            <iframe id="body-iframe" title="Message body" sandbox="allow-same-origin"></iframe>
            <pre id="body-text" class="body-text hidden"></pre>
          </div>
        </div>
      </section>
    </main>
  </div>
  <div id="context-menu" class="context-menu hidden">
    <button type="button" data-action="copy">Copy</button>
    <button type="button" data-action="paste">Paste</button>
    <button type="button" data-action="open-link" class="context-menu-link hidden">Open in browser</button>
  </div>
  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
